@model Beis.LearningPlatform.Web.Models.CmsSocialMediaViewModel

<div class="beis-social-media govuk-width-container" id="@Model.Component.id">
    <ul class="beis-social-media__list">
        <li class="beis-social-media__list-item">
            <a id="link-cmssocialmedia-twitter" data-tabclick="true" class="beis-social-media__link" href="https://twitter.com/intent/tweet?url=@Model.ShareLink@Model.Component.twitter&text=@Model.ShareTitle" target="_blank">
                <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg" class="beis-social-media__icon">
                    <path d="M12.9505 26.8498C21.8869 26.8498 26.7737 19.446 26.7737 13.0266C26.7737 12.8168 26.7737 12.6088 26.7737 12.4024C27.7259 11.7083 28.5458 10.8489 29.1943 9.86508C28.3092 10.2583 27.3701 10.5166 26.4084 10.6314C27.4216 10.0218 28.1803 9.06664 28.5448 7.9418C27.5914 8.50926 26.5478 8.90915 25.4594 9.12417C24.7937 8.41236 23.9294 7.91728 22.9787 7.70328C22.0279 7.48928 21.0348 7.56628 20.1284 7.92424C19.222 8.28221 18.4442 8.90458 17.8962 9.71046C17.3483 10.5163 17.0554 11.4685 17.0558 12.443C17.0567 12.817 17.0993 13.1897 17.1826 13.5543C15.2513 13.4573 13.362 12.9554 11.6372 12.0812C9.91236 11.2069 8.39049 9.97994 7.17039 8.47971C6.54982 9.55028 6.36184 10.8175 6.64484 12.0221C6.92784 13.2268 7.66042 14.2777 8.69278 14.96C7.90879 14.9576 7.13723 14.7643 6.44475 14.3967V14.4627C6.44493 15.5841 6.83315 16.6708 7.54355 17.5385C8.25396 18.4062 9.24273 19.0012 10.342 19.2227C9.9254 19.3371 9.49528 19.3951 9.06321 19.3952C8.75655 19.3935 8.45082 19.3629 8.14988 19.3039C8.45844 20.27 9.06194 21.1151 9.8757 21.7205C10.6895 22.3258 11.6725 22.6608 12.6866 22.6785C10.6495 24.2738 8.06626 25.0029 5.49574 24.7084C7.7152 26.1377 10.3004 26.8954 12.9403 26.8904L12.9505 26.8498Z" fill="currentColor" />
                </svg>
                <span class="govuk-visually-hidden">Tweet this page</span>
            </a>
        </li>
        <li class="beis-social-media__list-item">
            <a href="#toolTip" data-tabclick="true" class="beis-social-media__link" id="shareButton">
                <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg" class="beis-social-media__icon">
                    <path d="M10.4502 14.612C11.0154 14.6164 11.5685 14.7762 12.049 15.0739L18.4896 10.1355C18.305 9.73225 18.2065 9.29495 18.2003 8.85147C18.1943 8.24212 18.3695 7.6447 18.7035 7.13503C19.0375 6.62536 19.5154 6.22641 20.0766 5.98879C20.6377 5.75118 21.2568 5.68562 21.8553 5.80042C22.4538 5.91522 23.0046 6.2052 23.438 6.63359C23.8714 7.06199 24.1678 7.60948 24.2895 8.20658C24.4113 8.80368 24.353 9.42349 24.1219 9.98736C23.8908 10.5512 23.4973 11.0337 22.9916 11.3737C22.4858 11.7136 21.8905 11.8957 21.2811 11.8967C20.6332 11.8971 20.002 11.6909 19.4793 11.3079L13.1249 16.1752C13.3835 16.6283 13.5199 17.1407 13.5208 17.6623C13.5183 18.1976 13.3747 18.7228 13.1046 19.1849L19.5047 24.1741C20.1263 23.7377 20.8857 23.5429 21.6406 23.6262C22.3954 23.7095 23.0941 24.0652 23.6055 24.6266C24.117 25.188 24.4063 25.9166 24.4191 26.676C24.432 27.4354 24.1674 28.1734 23.6752 28.7517C23.1829 29.3301 22.4968 29.7092 21.7451 29.8179C20.9935 29.9267 20.2279 29.7576 19.5919 29.3425C18.956 28.9274 18.4932 28.2946 18.2903 27.5627C18.0873 26.8309 18.1582 26.0501 18.4896 25.3668L11.983 20.2914C11.5236 20.5704 10.9978 20.7212 10.4603 20.7279C9.6669 20.6956 8.91673 20.3577 8.36674 19.7849C7.81675 19.2121 7.50965 18.4488 7.50965 17.6547C7.50965 16.8606 7.81675 16.0973 8.36674 15.5245C8.91673 14.9517 9.6669 14.6138 10.4603 14.5816L10.4502 14.612Z" fill="currentColor" />
                </svg>
                <span class="govuk-visually-hidden">Forward this page by email</span>
            </a>
            <div id="toolTip" class="beis-social-media__tooltip beis-social-media__tooltip--hidden" aria-hidden="true">
                <button data-ga-action-id="btn-cmssocialmedia-default-copy-page-link" data-tabclick="true" class="govuk-button primary-big beis-social-media__copy-button">
                    <svg width="45" height="45" viewBox="0 0 45 45" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M13.8311 19.3394C14.5792 19.3452 15.3113 19.5567 15.9472 19.9508L24.4716 13.4147C24.2273 12.8809 24.0968 12.3021 24.0886 11.7152C24.0806 10.9087 24.3125 10.118 24.7546 9.44342C25.1968 8.76886 25.8292 8.24084 26.5719 7.92635C27.3146 7.61186 28.134 7.52508 28.9261 7.67703C29.7182 7.82897 30.4473 8.21276 31.0209 8.77976C31.5945 9.34675 31.9868 10.0714 32.1479 10.8617C32.309 11.6519 32.2319 12.4723 31.926 13.2186C31.6201 13.9649 31.0994 14.6035 30.43 15.0534C29.7606 15.5033 28.9727 15.7443 28.1662 15.7456C27.3086 15.7462 26.4732 15.4732 25.7814 14.9664L17.3712 21.4084C17.7135 22.008 17.894 22.6862 17.8952 23.3766C17.8919 24.0851 17.7019 24.7802 17.3443 25.3918L25.8151 31.9951C26.6377 31.4175 27.6428 31.1597 28.6419 31.27C29.641 31.3802 30.5657 31.851 31.2426 32.594C31.9196 33.3371 32.3025 34.3014 32.3194 35.3065C32.3364 36.3115 31.9863 37.2883 31.3348 38.0538C30.6833 38.8192 29.7752 39.321 28.7803 39.4649C27.7855 39.6088 26.7722 39.3851 25.9305 38.8357C25.0888 38.2862 24.4763 37.4487 24.2077 36.4801C23.9391 35.5115 24.033 34.4781 24.4716 33.5737L15.8598 26.8562C15.2518 27.2256 14.5559 27.4251 13.8446 27.4339C12.7944 27.3912 11.8016 26.944 11.0736 26.1859C10.3457 25.4278 9.93924 24.4175 9.93924 23.3665C9.93924 22.3155 10.3457 21.3053 11.0736 20.5471C11.8016 19.789 12.7944 19.3418 13.8446 19.2991L13.8311 19.3394Z" fill="currentColor" />
                    </svg>
                    Copy Link
                </button>
                <p class="govuk-body beis-social-media__copy-confirmation">Link copied</p>
                <a class="govuk-link beis-social-media__close-tooltip" href="#">Close <span class="govuk-visually-hidden">the tooltip</span></a>
            </div>
        </li>
        <li class="beis-social-media__list-item">
            <a id="link-cmssocialmedia-linkedin" target="_blank"
            class="beis-social-media__link" data-tabclick="true"
            href="https://www.linkedin.com/shareArticle?mini=true&title=@Model.ShareTitle&url=@Model.ShareLink@Model.Component.linkedIn"
            rel="noreferrer">
                <svg width="33" height="34" viewBox="0 0 33 34" fill="none" xmlns="http://www.w3.org/2000/svg" class="beis-social-media__icon">
                    <path d="M5.7734 13.1706H10.3695V28.3968H5.7734V13.1706ZM8.06892 5.59814C8.59601 5.59814 9.11126 5.7592 9.54952 6.06091C9.98778 6.36262 10.3294 6.79145 10.5311 7.29317C10.7328 7.7949 10.7856 8.34697 10.6828 8.8796C10.58 9.41223 10.3261 9.90149 9.95338 10.2855C9.58067 10.6695 9.1058 10.931 8.58883 11.0369C8.07187 11.1429 7.53603 11.0885 7.04906 10.8807C6.56209 10.6729 6.14597 10.3209 5.85314 9.8694C5.5603 9.41786 5.40394 8.887 5.40394 8.34394C5.40524 7.61612 5.68641 6.91851 6.18591 6.40386C6.68542 5.88922 7.36251 5.59948 8.06892 5.59814ZM13.2512 28.4069H17.8424V20.87C17.8424 18.8855 18.2069 16.9568 20.5961 16.9568C22.9853 16.9568 22.9852 19.2306 22.9852 21.0172V28.4272H27.5813V20.0478C27.5813 15.9469 26.7242 12.7951 22.069 12.7951C21.1957 12.7618 20.3299 12.9732 19.564 13.4066C18.798 13.8401 18.1605 14.4794 17.7192 15.2566H17.6552V13.1706H13.2512V28.4069Z" fill="currentColor" />
                </svg>
                <span class="govuk-visually-hidden">Share this page on LinkedIn</span>
            </a>
        </li>
        <li class="beis-social-media__list-item">
            <div
                data-href="@Model.ShareLink@Model.Component.facebook"
                data-layout="button_count"
                data-size="small">
                <a id="link-cmssocialmedia-facebook" target="_blank" 
                    data-tabclick="true" 
                    href="https://www.facebook.com/sharer/sharer.php?u=@Model.ShareLink@Model.Component.facebook&amp;src=sdkpreparse'" 
                    class="fb-xfbml-parse-ignore beis-social-media__link">
                    <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg" class="beis-social-media__icon">
                        <path d="M13.941 29.9638H19.1937V16.7996H22.864L23.2546 12.3931H19.1937V9.88949C19.1937 8.84797 19.404 8.43739 20.4104 8.43739H23.2546V3.86572H19.6143C15.7036 3.86572 13.941 5.58823 13.941 8.87302V12.3781H11.207V16.8396H13.941V29.9638Z" fill="currentColor" />
                    </svg>
                    <span class="govuk-visually-hidden">Post this page on Facebook</span>
                </a>
            </div>
        </li>
    </ul>

        @* Do not remove the commented code below. This might be required in the future
        <div id="fb-root"></div>
        <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v13.0" nonce="aQJaKtWD"></script>*@

</div>

<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<script>

    function Share(shareButton) {
        this.button = shareButton;
        this.tooltip = document.getElementById(this.button.hash.slice(1))
        this.setupEvents();
    }

    Share.prototype.setupEvents = function () {
        var that = this
        var closeButton = this.tooltip.getElementsByClassName('beis-social-media__close-tooltip')[0]
        var copyButton = this.tooltip.getElementsByClassName('beis-social-media__copy-button')[0]
        this.button.addEventListener('click', function(e) {
            if (navigator.share) {
                navigator.share({
                    title: '@Model.ShareTitle',
                    url: '@Model.ShareLink'
                }).catch(console.error);
            } else {
                that.showTooltip()
            }
            e.preventDefault();
        })
        closeButton.addEventListener('click', this.hideTooltip.bind(this))
        copyButton.addEventListener('click', this.copyUrl.bind(this))
    }

    Share.prototype.showTooltip = function () {
        this.tooltip.classList.remove('beis-social-media__tooltip--hidden');
        this.tooltip.classList.remove('beis-social-media__tooltip--copied');
        this.tooltip.setAttribute('aria-hidden', false)
    }

    Share.prototype.hideTooltip = function () {
        this.tooltip.classList.add('beis-social-media__tooltip--hidden');
        this.tooltip.setAttribute('aria-hidden', true)
        this.button.focus()
    }

    Share.prototype.copyUrl = function () {
        this.tooltip.classList.add('beis-social-media__tooltip--copied');
        this.populateClipboard()
    }

    Share.prototype.populateClipboard = function () {
        navigator.clipboard.writeText('@(Model.ShareLink)');
    }

    var shareButton = document.getElementById("shareButton");

    if (shareButton) {
        var sb = new Share(shareButton)
    }

</script>